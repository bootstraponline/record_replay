import t from"@pollyjs/adapter";import e from"detect-node";var n=Object.freeze({}),r=Math.ceil,o=Math.floor,i=function(t){return isNaN(t=+t)?0:(t>0?o:r)(t)},u=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t};function c(t,e){return t(e={exports:{}},e.exports),e.exports}var s=c(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),a=c(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),f=(a.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),l=function(t,e,n){if(f(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},h=function(t){return"object"==typeof t?null!==t:"function"==typeof t},p=function(t){if(!h(t))throw TypeError(t+" is not an object!");return t},v=function(t){try{return!!t()}catch(t){return!0}},y=!v(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),d=s.document,m=h(d)&&h(d.createElement),g=function(t){return m?d.createElement(t):{}},b=!y&&!v(function(){return 7!=Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a}),_=function(t,e){if(!h(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!h(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},w=Object.defineProperty,O={f:y?Object.defineProperty:function(t,e,n){if(p(t),e=_(e,!0),p(n),b)try{return w(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},P=y?function(t,e,n){return O.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},j={}.hasOwnProperty,E=function(t,e){return j.call(t,e)},x=function(t,e,n){var r,o,i,u=t&x.F,c=t&x.G,f=t&x.S,h=t&x.P,p=t&x.B,v=t&x.W,y=c?a:a[e]||(a[e]={}),d=y.prototype,m=c?s:f?s[e]:(s[e]||{}).prototype;for(r in c&&(n=e),n)(o=!u&&m&&void 0!==m[r])&&E(y,r)||(i=o?m[r]:n[r],y[r]=c&&"function"!=typeof m[r]?n[r]:p&&o?l(i,s):v&&m[r]==i?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):h&&"function"==typeof i?l(Function.call,i):i,h&&((y.virtual||(y.virtual={}))[r]=i,t&x.R&&d&&!d[r]&&P(d,r,i)))};x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;var T,R=x,L=P,F={},M={}.toString,k=function(t){return M.call(t).slice(8,-1)},A=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==k(t)?t.split(""):Object(t)},N=function(t){return A(u(t))},C=Math.min,q=function(t){return t>0?C(i(t),9007199254740991):0},D=Math.max,I=Math.min,G=c(function(t){var e=s["__core-js_shared__"]||(s["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:a.version,mode:"pure",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),W=0,H=Math.random(),K=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++W+H).toString(36))},U=G("keys"),V=function(t){return U[t]||(U[t]=K(t))},z=(T=!1,function(t,e,n){var r,o=N(t),u=q(o.length),c=function(t,e){return(t=i(t))<0?D(t+e,0):I(t,e)}(n,u);if(T&&e!=e){for(;u>c;)if((r=o[c++])!=r)return!0}else for(;u>c;c++)if((T||c in o)&&o[c]===e)return T||c||0;return!T&&-1}),B=V("IE_PROTO"),J=function(t,e){var n,r=N(t),o=0,i=[];for(n in r)n!=B&&E(r,n)&&i.push(n);for(;e.length>o;)E(r,n=e[o++])&&(~z(i,n)||i.push(n));return i},Y="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(t){return J(t,Y)},$=y?Object.defineProperties:function(t,e){p(t);for(var n,r=Q(e),o=r.length,i=0;o>i;)O.f(t,n=r[i++],e[n]);return t},X=s.document,Z=X&&X.documentElement,tt=V("IE_PROTO"),et=function(){},nt=function(){var t,e=g("iframe"),n=Y.length;for(e.style.display="none",Z.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),nt=t.F;n--;)delete nt.prototype[Y[n]];return nt()},rt=Object.create||function(t,e){var n;return null!==t?(et.prototype=p(t),n=new et,et.prototype=null,n[tt]=t):n=nt(),void 0===e?n:$(n,e)},ot=c(function(t){var e=G("wks"),n=s.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:K)("Symbol."+t))}).store=e}),it=O.f,ut=ot("toStringTag"),ct=function(t,e,n){t&&!E(t=n?t:t.prototype,ut)&&it(t,ut,{configurable:!0,value:e})},st={};P(st,ot("iterator"),function(){return this});var at,ft=function(t,e,n){t.prototype=rt(st,{next:S(1,n)}),ct(t,e+" Iterator")},lt=function(t){return Object(u(t))},ht=V("IE_PROTO"),pt=Object.prototype,vt=Object.getPrototypeOf||function(t){return t=lt(t),E(t,ht)?t[ht]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?pt:null},yt=ot("iterator"),dt=!([].keys&&"next"in[].keys()),mt=function(){return this},gt=function(t,e,n,r,o,i,u){ft(n,e,r);var c,s,a,f=function(t){if(!dt&&t in v)return v[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",h="values"==o,p=!1,v=t.prototype,y=v[yt]||v["@@iterator"]||o&&v[o],d=y||f(o),m=o?h?f("entries"):d:void 0,g="Array"==e&&v.entries||y;if(g&&(a=vt(g.call(new t)))!==Object.prototype&&a.next&&ct(a,l,!0),h&&y&&"values"!==y.name&&(p=!0,d=function(){return y.call(this)}),u&&(dt||p||!v[yt])&&P(v,yt,d),F[e]=d,F[l]=mt,o)if(c={values:h?d:f("values"),keys:i?d:f("keys"),entries:m},u)for(s in c)s in v||L(v,s,c[s]);else R(R.P+R.F*(dt||p),e,c);return c},bt=(at=!0,function(t,e){var n,r,o=String(u(t)),c=i(e),s=o.length;return c<0||c>=s?at?"":void 0:(n=o.charCodeAt(c))<55296||n>56319||c+1===s||(r=o.charCodeAt(c+1))<56320||r>57343?at?o.charAt(c):n:at?o.slice(c,c+2):r-56320+(n-55296<<10)+65536});gt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=bt(e,n),this._i+=t.length,{value:t,done:!1})});var _t=function(t,e){return{value:e,done:!!t}};gt(Array,"Array",function(t,e){this._t=N(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,_t(1)):_t(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");F.Arguments=F.Array;for(var wt=ot("toStringTag"),Ot="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),St=0;St<Ot.length;St++){var Pt=Ot[St],jt=s[Pt],Et=jt&&jt.prototype;Et&&!Et[wt]&&P(Et,wt,Pt),F[Pt]=F.Array}var xt,Tt,Rt,Lt=ot("toStringTag"),Ft="Arguments"==k(function(){return arguments}()),Mt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Lt))?n:Ft?k(e):"Object"==(r=k(e))&&"function"==typeof e.callee?"Arguments":r},kt=function(t,e,n,r){try{return r?e(p(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&p(o.call(t)),e}},At=ot("iterator"),Nt=Array.prototype,Ct=ot("iterator"),qt=a.getIteratorMethod=function(t){if(null!=t)return t[Ct]||t["@@iterator"]||F[Mt(t)]},Dt=c(function(t){var e={},n={},r=t.exports=function(t,r,o,i,u){var c,s,a,f,h,v=u?function(){return t}:qt(t),y=l(o,i,r?2:1),d=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(void 0===(h=v)||F.Array!==h&&Nt[At]!==h){for(a=v.call(t);!(s=a.next()).done;)if((f=kt(a,y,s.value,r))===e||f===n)return f}else for(c=q(t.length);c>d;d++)if((f=r?y(p(s=t[d])[0],s[1]):y(t[d]))===e||f===n)return f};r.BREAK=e,r.RETURN=n}),It=ot("species"),Gt=function(t,e){var n,r=p(t).constructor;return void 0===r||null==(n=p(r)[It])?e:f(n)},Wt=s.process,Ht=s.setImmediate,Kt=s.clearImmediate,Ut=s.MessageChannel,Vt=s.Dispatch,zt=0,Bt={},Jt=function(){var t=+this;if(Bt.hasOwnProperty(t)){var e=Bt[t];delete Bt[t],e()}},Yt=function(t){Jt.call(t.data)};Ht&&Kt||(Ht=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Bt[++zt]=function(){!function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},xt(zt),zt},Kt=function(t){delete Bt[t]},"process"==k(Wt)?xt=function(t){Wt.nextTick(l(Jt,t,1))}:Vt&&Vt.now?xt=function(t){Vt.now(l(Jt,t,1))}:Ut?(Rt=(Tt=new Ut).port2,Tt.port1.onmessage=Yt,xt=l(Rt.postMessage,Rt,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(xt=function(t){s.postMessage(t+"","*")},s.addEventListener("message",Yt,!1)):xt="onreadystatechange"in g("script")?function(t){Z.appendChild(g("script")).onreadystatechange=function(){Z.removeChild(this),Jt.call(t)}}:function(t){setTimeout(l(Jt,t,1),0)});var Qt={set:Ht,clear:Kt},$t=Qt.set,Xt=s.MutationObserver||s.WebKitMutationObserver,Zt=s.process,te=s.Promise,ee="process"==k(Zt);function ne(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=f(e),this.reject=f(n)}var re={f:function(t){return new ne(t)}},oe=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},ie=s.navigator,ue=ie&&ie.userAgent||"",ce=function(t,e){if(p(t),h(e)&&e.constructor===t)return e;var n=re.f(t);return(0,n.resolve)(e),n.promise},se=ot("species"),ae=ot("iterator"),fe=!1;try{var le=[7][ae]();le.return=function(){fe=!0},Array.from(le,function(){throw 2})}catch(t){}var he,pe,ve,ye,de,me,ge,be=Qt.set,_e=function(){var t,e,n,r=function(){var r,o;for(ee&&(r=Zt.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(ee)n=function(){Zt.nextTick(r)};else if(!Xt||s.navigator&&s.navigator.standalone)if(te&&te.resolve){var o=te.resolve(void 0);n=function(){o.then(r)}}else n=function(){$t.call(s,r)};else{var i=!0,u=document.createTextNode("");new Xt(r).observe(u,{characterData:!0}),n=function(){u.data=i=!i}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),we=s.TypeError,Oe=s.process,Se=Oe&&Oe.versions,Pe=Se&&Se.v8||"",je=s.Promise,Ee="process"==Mt(Oe),xe=function(){},Te=pe=re.f,Re=!!function(){try{var t=je.resolve(1),e=(t.constructor={})[ot("species")]=function(t){t(xe,xe)};return(Ee||"function"==typeof PromiseRejectionEvent)&&t.then(xe)instanceof e&&0!==Pe.indexOf("6.6")&&-1===ue.indexOf("Chrome/66")}catch(t){}}(),Le=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},Fe=function(t,e){if(!t._n){t._n=!0;var n=t._c;_e(function(){for(var r=t._v,o=1==t._s,i=0,u=function(e){var n,i,u,c=o?e.ok:e.fail,s=e.resolve,a=e.reject,f=e.domain;try{c?(o||(2==t._h&&Ae(t),t._h=1),!0===c?n=r:(f&&f.enter(),n=c(r),f&&(f.exit(),u=!0)),n===e.promise?a(we("Promise-chain cycle")):(i=Le(n))?i.call(n,s,a):s(n)):a(r)}catch(t){f&&!u&&f.exit(),a(t)}};n.length>i;)u(n[i++]);t._c=[],t._n=!1,e&&!t._h&&Me(t)})}},Me=function(t){be.call(s,function(){var e,n,r,o=t._v,i=ke(t);if(i&&(e=oe(function(){Ee?Oe.emit("unhandledRejection",o,t):(n=s.onunhandledrejection)?n({promise:t,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=Ee||ke(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},ke=function(t){return 1!==t._h&&0===(t._a||t._c).length},Ae=function(t){be.call(s,function(){var e;Ee?Oe.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},Ne=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Fe(e,!0))},Ce=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw we("Promise can't be resolved itself");(e=Le(t))?_e(function(){var r={_w:n,_d:!1};try{e.call(t,l(Ce,r,1),l(Ne,r,1))}catch(t){Ne.call(r,t)}}):(n._v=t,n._s=1,Fe(n,!1))}catch(t){Ne.call({_w:n,_d:!1},t)}}};Re||(je=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,je,"Promise","_h"),f(t),he.call(this);try{t(l(Ce,this,1),l(Ne,this,1))}catch(t){Ne.call(this,t)}},(he=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:P(t,r,e[r]);return t}(je.prototype,{then:function(t,e){var n=Te(Gt(this,je));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Ee?Oe.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Fe(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),ve=function(){var t=new he;this.promise=t,this.resolve=l(Ce,t,1),this.reject=l(Ne,t,1)},re.f=Te=function(t){return t===je||t===ye?new ve(t):pe(t)}),R(R.G+R.W+R.F*!Re,{Promise:je}),ct(je,"Promise"),me="function"==typeof a[de="Promise"]?a[de]:s[de],y&&me&&!me[se]&&O.f(me,se,{configurable:!0,get:function(){return this}}),ye=a.Promise,R(R.S+R.F*!Re,"Promise",{reject:function(t){var e=Te(this);return(0,e.reject)(t),e.promise}}),R(R.S+!0*R.F,"Promise",{resolve:function(t){return ce(this===ye?je:this,t)}}),R(R.S+R.F*!(Re&&function(t,e){if(!e&&!fe)return!1;var n=!1;try{var r=[7],o=r[ae]();o.next=function(){return{done:n=!0}},r[ae]=function(){return o},t(r)}catch(t){}return n}(function(t){je.all(t).catch(xe)})),"Promise",{all:function(t){var e=this,n=Te(e),r=n.resolve,o=n.reject,i=oe(function(){var n=[],i=0,u=1;Dt(t,!1,function(t){var c=i++,s=!1;n.push(void 0),u++,e.resolve(t).then(function(t){s||(s=!0,n[c]=t,--u||r(n))},o)}),--u||r(n)});return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=Te(e),r=n.reject,o=oe(function(){Dt(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}}),R(R.P+R.R,"Promise",{finally:function(t){var e=Gt(this,a.Promise||s.Promise),n="function"==typeof t;return this.then(n?function(n){return ce(e,t()).then(function(){return n})}:t,n?function(n){return ce(e,t()).then(function(){throw n})}:t)}}),R(R.S,"Promise",{try:function(t){var e=re.f(this),n=oe(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}}),(ge=n)&&ge.default;var qe=a.Promise,De={f:{}.propertyIsEnumerable},Ie=Object.getOwnPropertyDescriptor,Ge={f:y?Ie:function(t,e){if(t=N(t),e=_(e,!0),b)try{return Ie(t,e)}catch(t){}if(E(t,e))return S(!De.f.call(t,e),t[e])}},We=function(t,e){var n=(a.Object||{})[t]||Object[t],r={};r[t]=e(n),R(R.S+R.F*v(function(){n(1)}),"Object",r)},He=Ge.f;We("getOwnPropertyDescriptor",function(){return function(t,e){return He(N(t),e)}});var Ke=a.Object,Ue=function(t,e){return Ke.getOwnPropertyDescriptor(t,e)},Ve=c(function(t){var e=K("meta"),n=O.f,r=0,o=Object.isExtensible||function(){return!0},i=!v(function(){return o(Object.preventExtensions({}))}),u=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!h(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!E(t,e)){if(!o(t))return"F";if(!n)return"E";u(t)}return t[e].i},getWeak:function(t,n){if(!E(t,e)){if(!o(t))return!0;if(!n)return!1;u(t)}return t[e].w},onFreeze:function(t){return i&&c.NEED&&o(t)&&!E(t,e)&&u(t),t}}}),ze=(Ve.KEY,Ve.NEED,Ve.fastKey,Ve.getWeak,Ve.onFreeze,{f:ot}),Be=O.f,Je=function(t){var e=a.Symbol||(a.Symbol={});"_"==t.charAt(0)||t in e||Be(e,t,{value:ze.f(t)})},Ye={f:Object.getOwnPropertySymbols},Qe=Array.isArray||function(t){return"Array"==k(t)},$e=Y.concat("length","prototype"),Xe={f:Object.getOwnPropertyNames||function(t){return J(t,$e)}},Ze=Xe.f,tn={}.toString,en="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],nn={f:function(t){return en&&"[object Window]"==tn.call(t)?function(t){try{return Ze(t)}catch(t){return en.slice()}}(t):Ze(N(t))}},rn=Ve.KEY,on=Ge.f,un=O.f,cn=nn.f,sn=s.Symbol,an=s.JSON,fn=an&&an.stringify,ln=ot("_hidden"),hn=ot("toPrimitive"),pn={}.propertyIsEnumerable,vn=G("symbol-registry"),yn=G("symbols"),dn=G("op-symbols"),mn=Object.prototype,gn="function"==typeof sn&&!!Ye.f,bn=s.QObject,_n=!bn||!bn.prototype||!bn.prototype.findChild,wn=y&&v(function(){return 7!=rt(un({},"a",{get:function(){return un(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=on(mn,e);r&&delete mn[e],un(t,e,n),r&&t!==mn&&un(mn,e,r)}:un,On=function(t){var e=yn[t]=rt(sn.prototype);return e._k=t,e},Sn=gn&&"symbol"==typeof sn.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof sn},Pn=function(t,e,n){return t===mn&&Pn(dn,e,n),p(t),e=_(e,!0),p(n),E(yn,e)?(n.enumerable?(E(t,ln)&&t[ln][e]&&(t[ln][e]=!1),n=rt(n,{enumerable:S(0,!1)})):(E(t,ln)||un(t,ln,S(1,{})),t[ln][e]=!0),wn(t,e,n)):un(t,e,n)},jn=function(t,e){p(t);for(var n,r=function(t){var e=Q(t),n=Ye.f;if(n)for(var r,o=n(t),i=De.f,u=0;o.length>u;)i.call(t,r=o[u++])&&e.push(r);return e}(e=N(e)),o=0,i=r.length;i>o;)Pn(t,n=r[o++],e[n]);return t},En=function(t){var e=pn.call(this,t=_(t,!0));return!(this===mn&&E(yn,t)&&!E(dn,t))&&(!(e||!E(this,t)||!E(yn,t)||E(this,ln)&&this[ln][t])||e)},xn=function(t,e){if(t=N(t),e=_(e,!0),t!==mn||!E(yn,e)||E(dn,e)){var n=on(t,e);return!n||!E(yn,e)||E(t,ln)&&t[ln][e]||(n.enumerable=!0),n}},Tn=function(t){for(var e,n=cn(N(t)),r=[],o=0;n.length>o;)E(yn,e=n[o++])||e==ln||e==rn||r.push(e);return r},Rn=function(t){for(var e,n=t===mn,r=cn(n?dn:N(t)),o=[],i=0;r.length>i;)!E(yn,e=r[i++])||n&&!E(mn,e)||o.push(yn[e]);return o};gn||(L((sn=function(){if(this instanceof sn)throw TypeError("Symbol is not a constructor!");var t=K(arguments.length>0?arguments[0]:void 0),e=function(n){this===mn&&e.call(dn,n),E(this,ln)&&E(this[ln],t)&&(this[ln][t]=!1),wn(this,t,S(1,n))};return y&&_n&&wn(mn,t,{configurable:!0,set:e}),On(t)}).prototype,"toString",function(){return this._k}),Ge.f=xn,O.f=Pn,Xe.f=nn.f=Tn,De.f=En,Ye.f=Rn,ze.f=function(t){return On(ot(t))}),R(R.G+R.W+R.F*!gn,{Symbol:sn});for(var Ln="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Fn=0;Ln.length>Fn;)ot(Ln[Fn++]);for(var Mn=Q(ot.store),kn=0;Mn.length>kn;)Je(Mn[kn++]);R(R.S+R.F*!gn,"Symbol",{for:function(t){return E(vn,t+="")?vn[t]:vn[t]=sn(t)},keyFor:function(t){if(!Sn(t))throw TypeError(t+" is not a symbol!");for(var e in vn)if(vn[e]===t)return e},useSetter:function(){_n=!0},useSimple:function(){_n=!1}}),R(R.S+R.F*!gn,"Object",{create:function(t,e){return void 0===e?rt(t):jn(rt(t),e)},defineProperty:Pn,defineProperties:jn,getOwnPropertyDescriptor:xn,getOwnPropertyNames:Tn,getOwnPropertySymbols:Rn});var An=v(function(){Ye.f(1)});R(R.S+R.F*An,"Object",{getOwnPropertySymbols:function(t){return Ye.f(lt(t))}}),an&&R(R.S+R.F*(!gn||v(function(){var t=sn();return"[null]"!=fn([t])||"{}"!=fn({a:t})||"{}"!=fn(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(h(e)||void 0!==t)&&!Sn(t))return Qe(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Sn(e))return e}),r[1]=e,fn.apply(an,r)}}),sn.prototype[hn]||P(sn.prototype,hn,sn.prototype.valueOf),ct(sn,"Symbol"),ct(Math,"Math",!0),ct(s.JSON,"JSON",!0);var Nn=a.Object.getOwnPropertySymbols;We("keys",function(){return function(t){return Q(lt(t))}});var Cn=a.Object.keys;R(R.S+R.F*!y,"Object",{defineProperty:O.f});var qn=a.Object,Dn=function(t,e,n){return qn.defineProperty(t,e,n)};var In=function(t,e,n){return e in t?Dn(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};var Gn=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Cn(n);"function"==typeof Nn&&(r=r.concat(Nn(n).filter(function(t){return Ue(n,t).enumerable}))),r.forEach(function(e){In(t,e,n[e])})}return t};Je("asyncIterator"),Je("observable");var Wn=a.Symbol;function Hn(t){if(t&&"function"==typeof t.forEach){const e={};return t.forEach((t,n)=>e[n]=t),e}return t||{}}const{defineProperty:Kn}=Object,Un=Wn(),Vn=Wn();export default class extends t{static get name(){return"fetch"}get defaultOptions(){return{context:global}}onConnect(){const{context:t}=this.options;e&&console.warn("[Polly] [adapter:fetch] Using the fetch adapter in Node has been deprecated. Please use the node-http adapter instead."),["fetch","Request","Response","Headers"].forEach(e=>this.assert(`${e} global not found.`,!(!t||!t[e]))),this.assert("Running concurrent fetch adapters is unsupported, stop any running Polly instances.",!t.fetch[Un]&&!t.Request[Un]),this.nativeFetch=t.fetch,this.NativeRequest=t.Request;class n extends t.Request{constructor(t,e){let r;if(super(t,e),e=e||{},t instanceof n){const n=t[Vn];r=Gn({},n,{options:Gn({},n.options,e)})}else r={url:t,options:e};Kn(this,Vn,{value:r})}clone(){return new n(this)}}t.Request=n,Kn(t.Request,Un,{value:!0}),t.fetch=(e,r={})=>{let o;if(e instanceof n){const t=e,n=t[Vn];e=n.url,r=Gn({},n.options,r),"body"in n.options&&Kn(t,"bodyUsed",{value:!0})}const i=new qe((t,e)=>{o=({response:n,error:r})=>{r?e(r):t(n)}});return this.handleRequest({url:e,method:r.method||"GET",headers:Hn(new t.Headers(r.headers)),body:r.body,requestArguments:{options:r,respond:o}}),i},Kn(t.fetch,Un,{value:!0})}onDisconnect(){const{context:t}=this.options;t.fetch=this.nativeFetch,t.Request=this.NativeRequest,this.nativeFetch=null,this.NativeRequest=null}async passthroughRequest(t){const{context:e}=this.options,{options:n}=t.requestArguments,r=await this.nativeFetch.apply(e,[t.url,Gn({},n,{method:t.method,headers:t.headers,body:t.body})]);return{statusCode:r.status,headers:Hn(r.headers),body:await r.text()}}respondToRequest(t,e){const{context:{Response:n}}=this.options,{respond:r}=t.requestArguments;if(e)return void r({error:e});const{absoluteUrl:o,response:i}=t,{statusCode:u}=i,c=new n(204===u&&""===i.body?null:i.body,{status:u,headers:i.headers});Kn(c,"url",{value:o}),r({response:c})}}
//# sourceMappingURL=pollyjs-adapter-fetch.min.js.map
