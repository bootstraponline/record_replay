import t from"url-parse";import e from"qs";var r={RECORD:"record",REPLAY:"replay",PASSTHROUGH:"passthrough",STOPPED:"stopped"},n={RECORD:"record",REPLAY:"replay",INTERCEPT:"intercept",PASSTHROUGH:"passthrough"},o=["GET","PUT","POST","DELETE","PATCH","MERGE","HEAD","OPTIONS"],i={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},u={RECORD:"record",WARN:"warn",ERROR:"error"};class c extends Error{constructor(t,...e){super(`[Polly] ${t}`,...e),Error.captureStackTrace&&Error.captureStackTrace(this,c),this.name="PollyError"}}function a(t,e){if(!e)throw new c(t)}var f=Object.freeze({}),s=Math.ceil,l=Math.floor,p=function(t){return isNaN(t=+t)?0:(t>0?l:s)(t)},h=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t};function y(t,e){return t(e={exports:{}},e.exports),e.exports}var v=y(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),d=y(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),m=(d.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),g=function(t,e,r){if(m(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=function(t){if(!b(t))throw TypeError(t+" is not an object!");return t},O=function(t){try{return!!t()}catch(t){return!0}},w=!O(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),P=v.document,_=b(P)&&b(P.createElement),E=function(t){return _?P.createElement(t):{}},T=!w&&!O(function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a}),j=function(t,e){if(!b(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!b(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!b(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!b(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},R=Object.defineProperty,A={f:w?Object.defineProperty:function(t,e,r){if(S(t),e=j(e,!0),S(r),T)try{return R(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},x=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},L=w?function(t,e,r){return A.f(t,e,x(1,r))}:function(t,e,r){return t[e]=r,t},M={}.hasOwnProperty,F=function(t,e){return M.call(t,e)},C=function(t,e,r){var n,o,i,u=t&C.F,c=t&C.G,a=t&C.S,f=t&C.P,s=t&C.B,l=t&C.W,p=c?d:d[e]||(d[e]={}),h=p.prototype,y=c?v:a?v[e]:(v[e]||{}).prototype;for(n in c&&(r=e),r)(o=!u&&y&&void 0!==y[n])&&F(p,n)||(i=o?y[n]:r[n],p[n]=c&&"function"!=typeof y[n]?r[n]:s&&o?g(i,v):l&&y[n]==i?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):f&&"function"==typeof i?g(Function.call,i):i,f&&((p.virtual||(p.virtual={}))[n]=i,t&C.R&&h&&!h[n]&&L(h,n,i)))};C.F=1,C.G=2,C.S=4,C.P=8,C.B=16,C.W=32,C.U=64,C.R=128;var N,k=C,I=L,D={},B={}.toString,G=function(t){return B.call(t).slice(8,-1)},U=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==G(t)?t.split(""):Object(t)},H=function(t){return U(h(t))},q=Math.min,W=function(t){return t>0?q(p(t),9007199254740991):0},V=Math.max,$=Math.min,K=y(function(t){var e=v["__core-js_shared__"]||(v["__core-js_shared__"]={});(t.exports=function(t,r){return e[t]||(e[t]=void 0!==r?r:{})})("versions",[]).push({version:d.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),z=0,Y=Math.random(),J=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++z+Y).toString(36))},Q=K("keys"),X=function(t){return Q[t]||(Q[t]=J(t))},Z=(N=!1,function(t,e,r){var n,o=H(t),i=W(o.length),u=function(t,e){return(t=p(t))<0?V(t+e,0):$(t,e)}(r,i);if(N&&e!=e){for(;i>u;)if((n=o[u++])!=n)return!0}else for(;i>u;u++)if((N||u in o)&&o[u]===e)return N||u||0;return!N&&-1}),tt=X("IE_PROTO"),et=function(t,e){var r,n=H(t),o=0,i=[];for(r in n)r!=tt&&F(n,r)&&i.push(r);for(;e.length>o;)F(n,r=e[o++])&&(~Z(i,r)||i.push(r));return i},rt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),nt=Object.keys||function(t){return et(t,rt)},ot=w?Object.defineProperties:function(t,e){S(t);for(var r,n=nt(e),o=n.length,i=0;o>i;)A.f(t,r=n[i++],e[r]);return t},it=v.document,ut=it&&it.documentElement,ct=X("IE_PROTO"),at=function(){},ft=function(){var t,e=E("iframe"),r=rt.length;for(e.style.display="none",ut.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ft=t.F;r--;)delete ft.prototype[rt[r]];return ft()},st=Object.create||function(t,e){var r;return null!==t?(at.prototype=S(t),r=new at,at.prototype=null,r[ct]=t):r=ft(),void 0===e?r:ot(r,e)},lt=y(function(t){var e=K("wks"),r=v.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:J)("Symbol."+t))}).store=e}),pt=A.f,ht=lt("toStringTag"),yt=function(t,e,r){t&&!F(t=r?t:t.prototype,ht)&&pt(t,ht,{configurable:!0,value:e})},vt={};L(vt,lt("iterator"),function(){return this});var dt,mt=function(t,e,r){t.prototype=st(vt,{next:x(1,r)}),yt(t,e+" Iterator")},gt=function(t){return Object(h(t))},bt=X("IE_PROTO"),St=Object.prototype,Ot=Object.getPrototypeOf||function(t){return t=gt(t),F(t,bt)?t[bt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?St:null},wt=lt("iterator"),Pt=!([].keys&&"next"in[].keys()),_t=function(){return this},Et=function(t,e,r,n,o,i,u){mt(r,e,n);var c,a,f,s=function(t){if(!Pt&&t in y)return y[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=e+" Iterator",p="values"==o,h=!1,y=t.prototype,v=y[wt]||y["@@iterator"]||o&&y[o],d=v||s(o),m=o?p?s("entries"):d:void 0,g="Array"==e&&y.entries||v;if(g&&(f=Ot(g.call(new t)))!==Object.prototype&&f.next&&yt(f,l,!0),p&&v&&"values"!==v.name&&(h=!0,d=function(){return v.call(this)}),u&&(Pt||h||!y[wt])&&L(y,wt,d),D[e]=d,D[l]=_t,o)if(c={values:p?d:s("values"),keys:i?d:s("keys"),entries:m},u)for(a in c)a in y||I(y,a,c[a]);else k(k.P+k.F*(Pt||h),e,c);return c},Tt=(dt=!0,function(t,e){var r,n,o=String(h(t)),i=p(e),u=o.length;return i<0||i>=u?dt?"":void 0:(r=o.charCodeAt(i))<55296||r>56319||i+1===u||(n=o.charCodeAt(i+1))<56320||n>57343?dt?o.charAt(i):r:dt?o.slice(i,i+2):n-56320+(r-55296<<10)+65536});Et(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=Tt(e,r),this._i+=t.length,{value:t,done:!1})});var jt=function(t,e){return{value:e,done:!!t}};Et(Array,"Array",function(t,e){this._t=H(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,jt(1)):jt(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values");D.Arguments=D.Array;for(var Rt=lt("toStringTag"),At="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),xt=0;xt<At.length;xt++){var Lt=At[xt],Mt=v[Lt],Ft=Mt&&Mt.prototype;Ft&&!Ft[Rt]&&L(Ft,Rt,Lt),D[Lt]=D.Array}var Ct,Nt,kt,It=lt("toStringTag"),Dt="Arguments"==G(function(){return arguments}()),Bt=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),It))?r:Dt?G(e):"Object"==(n=G(e))&&"function"==typeof e.callee?"Arguments":n},Gt=function(t,e,r,n){try{return n?e(S(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&S(o.call(t)),e}},Ut=lt("iterator"),Ht=Array.prototype,qt=lt("iterator"),Wt=d.getIteratorMethod=function(t){if(null!=t)return t[qt]||t["@@iterator"]||D[Bt(t)]},Vt=y(function(t){var e={},r={},n=t.exports=function(t,n,o,i,u){var c,a,f,s,l,p=u?function(){return t}:Wt(t),h=g(o,i,n?2:1),y=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(void 0===(l=p)||D.Array!==l&&Ht[Ut]!==l){for(f=p.call(t);!(a=f.next()).done;)if((s=Gt(f,h,a.value,n))===e||s===r)return s}else for(c=W(t.length);c>y;y++)if((s=n?h(S(a=t[y])[0],a[1]):h(t[y]))===e||s===r)return s};n.BREAK=e,n.RETURN=r}),$t=lt("species"),Kt=function(t,e){var r,n=S(t).constructor;return void 0===n||null==(r=S(n)[$t])?e:m(r)},zt=v.process,Yt=v.setImmediate,Jt=v.clearImmediate,Qt=v.MessageChannel,Xt=v.Dispatch,Zt=0,te={},ee=function(){var t=+this;if(te.hasOwnProperty(t)){var e=te[t];delete te[t],e()}},re=function(t){ee.call(t.data)};Yt&&Jt||(Yt=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return te[++Zt]=function(){!function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}t.apply(r,e)}("function"==typeof t?t:Function(t),e)},Ct(Zt),Zt},Jt=function(t){delete te[t]},"process"==G(zt)?Ct=function(t){zt.nextTick(g(ee,t,1))}:Xt&&Xt.now?Ct=function(t){Xt.now(g(ee,t,1))}:Qt?(kt=(Nt=new Qt).port2,Nt.port1.onmessage=re,Ct=g(kt.postMessage,kt,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts?(Ct=function(t){v.postMessage(t+"","*")},v.addEventListener("message",re,!1)):Ct="onreadystatechange"in E("script")?function(t){ut.appendChild(E("script")).onreadystatechange=function(){ut.removeChild(this),ee.call(t)}}:function(t){setTimeout(g(ee,t,1),0)});var ne={set:Yt,clear:Jt},oe=ne.set,ie=v.MutationObserver||v.WebKitMutationObserver,ue=v.process,ce=v.Promise,ae="process"==G(ue);function fe(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=m(e),this.reject=m(r)}var se={f:function(t){return new fe(t)}},le=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},pe=v.navigator,he=pe&&pe.userAgent||"",ye=function(t,e){if(S(t),b(e)&&e.constructor===t)return e;var r=se.f(t);return(0,r.resolve)(e),r.promise},ve=lt("species"),de=lt("iterator"),me=!1;try{var ge=[7][de]();ge.return=function(){me=!0},Array.from(ge,function(){throw 2})}catch(t){}var be,Se,Oe,we,Pe,_e,Ee,Te=ne.set,je=function(){var t,e,r,n=function(){var n,o;for(ae&&(n=ue.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(ae)r=function(){ue.nextTick(n)};else if(!ie||v.navigator&&v.navigator.standalone)if(ce&&ce.resolve){var o=ce.resolve(void 0);r=function(){o.then(n)}}else r=function(){oe.call(v,n)};else{var i=!0,u=document.createTextNode("");new ie(n).observe(u,{characterData:!0}),r=function(){u.data=i=!i}}return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}(),Re=v.TypeError,Ae=v.process,xe=Ae&&Ae.versions,Le=xe&&xe.v8||"",Me=v.Promise,Fe="process"==Bt(Ae),Ce=function(){},Ne=Se=se.f,ke=!!function(){try{var t=Me.resolve(1),e=(t.constructor={})[lt("species")]=function(t){t(Ce,Ce)};return(Fe||"function"==typeof PromiseRejectionEvent)&&t.then(Ce)instanceof e&&0!==Le.indexOf("6.6")&&-1===he.indexOf("Chrome/66")}catch(t){}}(),Ie=function(t){var e;return!(!b(t)||"function"!=typeof(e=t.then))&&e},De=function(t,e){if(!t._n){t._n=!0;var r=t._c;je(function(){for(var n=t._v,o=1==t._s,i=0,u=function(e){var r,i,u,c=o?e.ok:e.fail,a=e.resolve,f=e.reject,s=e.domain;try{c?(o||(2==t._h&&Ue(t),t._h=1),!0===c?r=n:(s&&s.enter(),r=c(n),s&&(s.exit(),u=!0)),r===e.promise?f(Re("Promise-chain cycle")):(i=Ie(r))?i.call(r,a,f):a(r)):f(n)}catch(t){s&&!u&&s.exit(),f(t)}};r.length>i;)u(r[i++]);t._c=[],t._n=!1,e&&!t._h&&Be(t)})}},Be=function(t){Te.call(v,function(){var e,r,n,o=t._v,i=Ge(t);if(i&&(e=le(function(){Fe?Ae.emit("unhandledRejection",o,t):(r=v.onunhandledrejection)?r({promise:t,reason:o}):(n=v.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=Fe||Ge(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},Ge=function(t){return 1!==t._h&&0===(t._a||t._c).length},Ue=function(t){Te.call(v,function(){var e;Fe?Ae.emit("rejectionHandled",t):(e=v.onrejectionhandled)&&e({promise:t,reason:t._v})})},He=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),De(e,!0))},qe=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Re("Promise can't be resolved itself");(e=Ie(t))?je(function(){var n={_w:r,_d:!1};try{e.call(t,g(qe,n,1),g(He,n,1))}catch(t){He.call(n,t)}}):(r._v=t,r._s=1,De(r,!1))}catch(t){He.call({_w:r,_d:!1},t)}}};ke||(Me=function(t){!function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!")}(this,Me,"Promise","_h"),m(t),be.call(this);try{t(g(qe,this,1),g(He,this,1))}catch(t){He.call(this,t)}},(be=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,r){for(var n in e)r&&t[n]?t[n]=e[n]:L(t,n,e[n]);return t}(Me.prototype,{then:function(t,e){var r=Ne(Kt(this,Me));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Fe?Ae.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&De(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Oe=function(){var t=new be;this.promise=t,this.resolve=g(qe,t,1),this.reject=g(He,t,1)},se.f=Ne=function(t){return t===Me||t===we?new Oe(t):Se(t)}),k(k.G+k.W+k.F*!ke,{Promise:Me}),yt(Me,"Promise"),_e="function"==typeof d[Pe="Promise"]?d[Pe]:v[Pe],w&&_e&&!_e[ve]&&A.f(_e,ve,{configurable:!0,get:function(){return this}}),we=d.Promise,k(k.S+k.F*!ke,"Promise",{reject:function(t){var e=Ne(this);return(0,e.reject)(t),e.promise}}),k(k.S+!0*k.F,"Promise",{resolve:function(t){return ye(this===we?Me:this,t)}}),k(k.S+k.F*!(ke&&function(t,e){if(!e&&!me)return!1;var r=!1;try{var n=[7],o=n[de]();o.next=function(){return{done:r=!0}},n[de]=function(){return o},t(n)}catch(t){}return r}(function(t){Me.all(t).catch(Ce)})),"Promise",{all:function(t){var e=this,r=Ne(e),n=r.resolve,o=r.reject,i=le(function(){var r=[],i=0,u=1;Vt(t,!1,function(t){var c=i++,a=!1;r.push(void 0),u++,e.resolve(t).then(function(t){a||(a=!0,r[c]=t,--u||n(r))},o)}),--u||n(r)});return i.e&&o(i.v),r.promise},race:function(t){var e=this,r=Ne(e),n=r.reject,o=le(function(){Vt(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}}),k(k.P+k.R,"Promise",{finally:function(t){var e=Kt(this,d.Promise||v.Promise),r="function"==typeof t;return this.then(r?function(r){return ye(e,t()).then(function(){return r})}:t,r?function(r){return ye(e,t()).then(function(){throw r})}:t)}}),k(k.S,"Promise",{try:function(t){var e=se.f(this),r=le(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}}),(Ee=f)&&Ee.default;var We=d.Promise,Ve="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",$e="["+Ve+"]",Ke=RegExp("^"+$e+$e+"*"),ze=RegExp($e+$e+"*$"),Ye=function(t,e,r){var n={},o=O(function(){return!!Ve[t]()||"​"!="​"[t]()}),i=n[t]=o?e(Je):Ve[t];r&&(n[r]=i),k(k.P+k.F*o,"String",n)},Je=Ye.trim=function(t,e){return t=String(h(t)),1&e&&(t=t.replace(Ke,"")),2&e&&(t=t.replace(ze,"")),t},Qe=Ye,Xe=v.parseInt,Ze=Qe.trim,tr=/^[-+]?0[xX]/,er=8!==Xe(Ve+"08")||22!==Xe(Ve+"0x16")?function(t,e){var r=Ze(String(t),3);return Xe(r,e>>>0||(tr.test(r)?16:10))}:Xe;k(k.G+k.F*(parseInt!=er),{parseInt:er});var rr=d.parseInt;function nr(t){const e=rr(t,10);return new We(t=>e>0?setTimeout(t,e):t())}function or(){return(new Date).toISOString()}var ir={f:{}.propertyIsEnumerable},ur=Object.getOwnPropertyDescriptor,cr={f:w?ur:function(t,e){if(t=H(t),e=j(e,!0),T)try{return ur(t,e)}catch(t){}if(F(t,e))return x(!ir.f.call(t,e),t[e])}},ar=function(t,e){var r=(d.Object||{})[t]||Object[t],n={};n[t]=e(r),k(k.S+k.F*O(function(){r(1)}),"Object",n)},fr=cr.f;ar("getOwnPropertyDescriptor",function(){return function(t,e){return fr(H(t),e)}});var sr=d.Object,lr=function(t,e){return sr.getOwnPropertyDescriptor(t,e)},pr=y(function(t){var e=J("meta"),r=A.f,n=0,o=Object.isExtensible||function(){return!0},i=!O(function(){return o(Object.preventExtensions({}))}),u=function(t){r(t,e,{value:{i:"O"+ ++n,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,r){if(!b(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!F(t,e)){if(!o(t))return"F";if(!r)return"E";u(t)}return t[e].i},getWeak:function(t,r){if(!F(t,e)){if(!o(t))return!0;if(!r)return!1;u(t)}return t[e].w},onFreeze:function(t){return i&&c.NEED&&o(t)&&!F(t,e)&&u(t),t}}}),hr=(pr.KEY,pr.NEED,pr.fastKey,pr.getWeak,pr.onFreeze,{f:lt}),yr=A.f,vr=function(t){var e=d.Symbol||(d.Symbol={});"_"==t.charAt(0)||t in e||yr(e,t,{value:hr.f(t)})},dr={f:Object.getOwnPropertySymbols},mr=Array.isArray||function(t){return"Array"==G(t)},gr=rt.concat("length","prototype"),br={f:Object.getOwnPropertyNames||function(t){return et(t,gr)}},Sr=br.f,Or={}.toString,wr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Pr={f:function(t){return wr&&"[object Window]"==Or.call(t)?function(t){try{return Sr(t)}catch(t){return wr.slice()}}(t):Sr(H(t))}},_r=pr.KEY,Er=cr.f,Tr=A.f,jr=Pr.f,Rr=v.Symbol,Ar=v.JSON,xr=Ar&&Ar.stringify,Lr=lt("_hidden"),Mr=lt("toPrimitive"),Fr={}.propertyIsEnumerable,Cr=K("symbol-registry"),Nr=K("symbols"),kr=K("op-symbols"),Ir=Object.prototype,Dr="function"==typeof Rr&&!!dr.f,Br=v.QObject,Gr=!Br||!Br.prototype||!Br.prototype.findChild,Ur=w&&O(function(){return 7!=st(Tr({},"a",{get:function(){return Tr(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=Er(Ir,e);n&&delete Ir[e],Tr(t,e,r),n&&t!==Ir&&Tr(Ir,e,n)}:Tr,Hr=function(t){var e=Nr[t]=st(Rr.prototype);return e._k=t,e},qr=Dr&&"symbol"==typeof Rr.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Rr},Wr=function(t,e,r){return t===Ir&&Wr(kr,e,r),S(t),e=j(e,!0),S(r),F(Nr,e)?(r.enumerable?(F(t,Lr)&&t[Lr][e]&&(t[Lr][e]=!1),r=st(r,{enumerable:x(0,!1)})):(F(t,Lr)||Tr(t,Lr,x(1,{})),t[Lr][e]=!0),Ur(t,e,r)):Tr(t,e,r)},Vr=function(t,e){S(t);for(var r,n=function(t){var e=nt(t),r=dr.f;if(r)for(var n,o=r(t),i=ir.f,u=0;o.length>u;)i.call(t,n=o[u++])&&e.push(n);return e}(e=H(e)),o=0,i=n.length;i>o;)Wr(t,r=n[o++],e[r]);return t},$r=function(t){var e=Fr.call(this,t=j(t,!0));return!(this===Ir&&F(Nr,t)&&!F(kr,t))&&(!(e||!F(this,t)||!F(Nr,t)||F(this,Lr)&&this[Lr][t])||e)},Kr=function(t,e){if(t=H(t),e=j(e,!0),t!==Ir||!F(Nr,e)||F(kr,e)){var r=Er(t,e);return!r||!F(Nr,e)||F(t,Lr)&&t[Lr][e]||(r.enumerable=!0),r}},zr=function(t){for(var e,r=jr(H(t)),n=[],o=0;r.length>o;)F(Nr,e=r[o++])||e==Lr||e==_r||n.push(e);return n},Yr=function(t){for(var e,r=t===Ir,n=jr(r?kr:H(t)),o=[],i=0;n.length>i;)!F(Nr,e=n[i++])||r&&!F(Ir,e)||o.push(Nr[e]);return o};Dr||(I((Rr=function(){if(this instanceof Rr)throw TypeError("Symbol is not a constructor!");var t=J(arguments.length>0?arguments[0]:void 0),e=function(r){this===Ir&&e.call(kr,r),F(this,Lr)&&F(this[Lr],t)&&(this[Lr][t]=!1),Ur(this,t,x(1,r))};return w&&Gr&&Ur(Ir,t,{configurable:!0,set:e}),Hr(t)}).prototype,"toString",function(){return this._k}),cr.f=Kr,A.f=Wr,br.f=Pr.f=zr,ir.f=$r,dr.f=Yr,hr.f=function(t){return Hr(lt(t))}),k(k.G+k.W+k.F*!Dr,{Symbol:Rr});for(var Jr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Qr=0;Jr.length>Qr;)lt(Jr[Qr++]);for(var Xr=nt(lt.store),Zr=0;Xr.length>Zr;)vr(Xr[Zr++]);k(k.S+k.F*!Dr,"Symbol",{for:function(t){return F(Cr,t+="")?Cr[t]:Cr[t]=Rr(t)},keyFor:function(t){if(!qr(t))throw TypeError(t+" is not a symbol!");for(var e in Cr)if(Cr[e]===t)return e},useSetter:function(){Gr=!0},useSimple:function(){Gr=!1}}),k(k.S+k.F*!Dr,"Object",{create:function(t,e){return void 0===e?st(t):Vr(st(t),e)},defineProperty:Wr,defineProperties:Vr,getOwnPropertyDescriptor:Kr,getOwnPropertyNames:zr,getOwnPropertySymbols:Yr});var tn=O(function(){dr.f(1)});k(k.S+k.F*tn,"Object",{getOwnPropertySymbols:function(t){return dr.f(gt(t))}}),Ar&&k(k.S+k.F*(!Dr||O(function(){var t=Rr();return"[null]"!=xr([t])||"{}"!=xr({a:t})||"{}"!=xr(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=e=n[1],(b(e)||void 0!==t)&&!qr(t))return mr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!qr(e))return e}),n[1]=e,xr.apply(Ar,n)}}),Rr.prototype[Mr]||L(Rr.prototype,Mr,Rr.prototype.valueOf),yt(Rr,"Symbol"),yt(Math,"Math",!0),yt(v.JSON,"JSON",!0);var en=d.Object.getOwnPropertySymbols;ar("keys",function(){return function(t){return nt(gt(t))}});var rn=d.Object.keys;k(k.S+k.F*!w,"Object",{defineProperty:A.f});var nn=d.Object,on=function(t,e,r){return nn.defineProperty(t,e,r)};var un=function(t,e,r){return e in t?on(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t};var cn=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=rn(r);"function"==typeof en&&(n=n.concat(en(r).filter(function(t){return lr(r,t).enumerable}))),n.forEach(function(e){un(t,e,r[e])})}return t};vr("asyncIterator"),vr("observable");const an=(0,d.Symbol)(),fn=/\[\d+\]$/,sn=/\[\]$/;function ln(t,r){return e.parse(t,cn({plainObjects:!0,ignoreQueryPrefix:!0},r))}class pn extends t{constructor(t,e){super(t),e&&this.set("query",this.query||{})}set(t,e,r){return"query"===t?(e&&"string"==typeof e&&(this[an]=function(t){const e=(t||"").replace("?","").split("&").map(t=>decodeURIComponent(t.split("=")[0]));for(const t of e){if(fn.test(t))return"indices";if(sn.test(t))return"brackets"}if(e.some((t,r)=>e.indexOf(t)!==r))return"repeat"}(e)||this[an]),super.set(t,e,ln)):super.set(t,e,r)}toString(){return super.toString(t=>(function(t,r={}){return e.stringify(t,cn({addQueryPrefix:!0},r))})(t,{arrayFormat:this[an]}))}}function hn(...t){const e=new pn(t.map(t=>t&&(t+"").trim()).filter(Boolean).join("/"));return e.set("pathname",e.pathname.replace(/\/{2,}/g,"/")),e.href}const yn=(()=>{try{return!!new Blob}catch(t){return!1}})();function vn(t){return new We((e,r)=>{const n=new FileReader;n.onend=r,n.onabort=r,n.onload=()=>e(n.result),n.readAsDataURL(new Blob([t],{type:t.type}))})}const dn="undefined"!=typeof FormData;k(k.S,"Array",{isArray:mr});var mn=d.Array.isArray;const gn="undefined"!=typeof Buffer,bn="undefined"!=typeof ArrayBuffer;var Sn={blob:async function(t){return yn&&t instanceof Blob?await vn(t):t},formData:async function(t){if(dn&&t instanceof FormData){const e=[];for(const[r,n]of t.entries())if(yn&&n instanceof Blob){const t=await vn(n);e.push(`${r}=${t}`)}else e.push(`${r}=${n}`);return e.join("\r\n")}return t},buffer:function(t){if(gn&&t){let e;if(Buffer.isBuffer(t))e=t;else if(mn(t)&&t.some(t=>Buffer.isBuffer(t))){const r=t.map(t=>Buffer.from(t));e=Buffer.concat(r)}else"[object ArrayBuffer]"===`${t}`?e=Buffer.from(t):bn&&ArrayBuffer.isView(t)&&(e=Buffer.from(t.buffer,t.byteOffset,t.byteLength));if(Buffer.isBuffer(e))return e.toString("hex")}return t}};export{n as ACTIONS,u as EXPIRY_STRATEGIES,o as HTTP_METHODS,i as HTTP_STATUS_CODES,r as MODES,c as PollyError,Sn as Serializers,pn as URL,a as assert,hn as buildUrl,nr as timeout,or as timestamp};
//# sourceMappingURL=pollyjs-utils.min.js.map
